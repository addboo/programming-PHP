# ΑΝΤΙΚΕΙΜΕΝΟΣΤΡΕΦΗΣ ΠΡΟΓΡΑΜΜΑΤΙΣΜΟΣ


## Τί είναι ο Αντικειμενοστρεφής Προγραμματισμός
Για την ανάπτυξη ενός προγράμματος δεν είναι υποχρεωτικός ο Αντικειμενοστρεφής Προγραμματισμός. Τον χρησιμοποιούμε για σύνθετα προγράμματα γιατί μας βοηθά στην καλύτερη οργάνωση και διαχείριση του κώδικά μας. Συγκεκριμένα, εαν γράψετε ένα πρόγραμμα 200 γραμμών, τότε δεν είναι απαραίτητο να υλοποιηθεί σε Α/Π. Σε ένα πρόγραμμα όμως χιλιάδων γραμμών, τότε είναι απαραίτητο. 

Με τον Αντικειμενοστρεφή Προγραμματισμό σχεδιάζουμε καλύτερα το πρόγραμμά μας. Το χωρίζουμε σε τμήματα επιτυγχάνοντας καλύτερη δομή στον κώδικά μας. Με λίγα λόγια, με τον Α/Π γλιτώνουμε απο το απόλυτο χάος στον κώδικά μας βάζοντάς τον σε τάξη. 

Στον Αντικειμενοστρεφή Προγραμματισμό κάθε κλάση (class) κάνει μια συγκεκριμένη ενέργεια. Συνεπώς, το πρόγραμμά μας το χωρίζουμε σε κλάσεις όπου η κάθε κλάση έχει συγκεκριμένο λόγο ύπαρξης και εκτελεί συγκεκριμένες εργασίες. 


Πώς δημιουργούμε μια κλαση
Μια κλάση δημιουργείται χρησιμοποιώντας την λέξη class. Για παράδειγμα, για να δημιουργήσουμε μια κλάση με όνομα Account, τότε γράφουμε:

class Account     ←  Αρχή της κλάσης
{
}                 ←  Τέλος της κλάσης

Η κλάση που δημιουργήσαμε δεν κάνει προς το παρόν απολύτως τίποτα γιατί πολύ απλά δεν περικλύει καθόλου κώδικα. Απο αυτή την κλάση όμως μπορούμε να δημιουργήσουμε αντικείμενα. 

Τα αντικείμενα είναι το «αντίγραφο» της κλάσης (blueprint). Απο μία κλάση μπορούν να δημιουργηθούν πολλαπλά αντικείμενα που το κάθε αντικείμενο θα έχει τον ίδιο κώδικα από την κλάση που δημιουργήθηκε. 

Για παράδειγμα, μια κλάση είναι κάτι αντίστοιχο με το αρχιτεκτονικό σχέδιο ενός σπιτιού. Βάσει του αρχιτεκτινικού αυτού σχεδίου κατασκευάζουμε το σπίτι (δηλαδή το αντικείμενο). Μπορούμε βέβαια, χρησιμοποιώντας το συγκεκριμένο αρχιτεκτονικό σχέδιο να κατασκευάσουμε πολλαπλά σπίτια (δηλαδή πολλαπλά αντικείμενα). 

Παρακάτω θα δημιουργήσουμε μια κλάση Account η οποία θα εκτελεί ενέργειες που πραγματοποιούνται στις τραπεζικές μας συναλλαγές:

```php
1. <?php
2. class Αaccount 
3. {
4.   //εδώ γράφουμε τον κώδικά μας
5. }
6. ?> 
```

Αρχικά θα αναλύσουμε τα δομικά στοιχεία που αποτελείται μια κλάση. Στην γραμμή 2 δηλώνουμε το όνομα της κλάσης μας. Στην συγκεκριμένη περίπτωση είναι η Account.  


## Πώς δημιουργούμε αντικείμενα
Προς το παρόν δημιουργήσαμε μια κλάση, αλλά ακόμα δεν την έχουμε χρησιμοποιήσει γιατί πολύ απλά δεν δημιουργήσαμε κανένα αντικείμενο. Παρακάτω θα δούμε πώς δημιουργούμε ένα αντικείμενο απο την κλάση Account.

```php
<?php
bob = new Account();
?>
```

Για να δημιουργήσουμε ένα νέο αντικείμενο, καλούμε την μέθοδο new. Το αντικείμενό μας πλέον έχει δημιουργηθεί και είναι το bob. Από εδώ και στο εξής, μέσα στον κώδικά μας, όποτε καλούμε το bob, θα χρησιμοποιούμε τον κώδικα που υπάρχει εντός της κλάσης Account.

Στο παραπάνω παράδειγμα δημιουργήσαμε το αντικείμενο bob απο την κλάση Account. Μπορούμε να δημιουργήσουμε πολλαπλά αντικείμενα χρησιμοποιώντας την ίδια κλάση όπως π.χ. 

```php
$maria = new Account(); 
```

Κάθε αντικείμενο τρέχει τον ίδιο κώδικα που έχουμε γράψει στην κλάση Account αλλά με διαφορετικές τιμές. Αυτός άλλωστε είναι ο σκοπός του Αντικειμενοστρεφούς προγραμματισμού.


## Πώς ομαδοποιούμε δεδομένα
Στις κλάσεις δεν είναι απαραίτητο να αποθηκεύουμε δεδομένα. Αλλά ορισμένες φορές είναι απαραίτητο. Κάθε κλάση  αποθηκεύει και τα δικά της δεδομένα όπως για παράδειγμα η Account. Στην Account εκτός απο το να αποθηκεύουμε το balance, μπορούμε να αποθηκεύσουμε το όνομα και το email του πελάτη που είναι κάτοχος του λογαριασμού. Τα δεδομένα που αποθηκεύονται στην κλάση είναι σχετικά με τον σκοπό που έχει δημιουργηθεί η κλάση. 

```php
class Account
{
  public $name;
  public $email;
  public $balance;

  function create($name, $email, $balance)
  {
    $this->name = $name;
    $this->email = $email;
    $this->balance = $balance;
  }
}
```

Το παράδειγμα με τον τραπεζικό λογαριασμό πλέον αρχίζει να γίνεται πιο κατανοητό. Όταν δημιουργούμε ένα αντικείμενο, δηλώνουμε περισσότερες παραμέτρους στα δεδομένα του αντικειμένου μας π.χ.

```php
$bob = new Account("Bob", "info@bob.com", 10.00);
```

Ένα αντικείμενο όμως, εκτός απο τα δεδομένα, περιέχει και μεθόδους οι οποίες είναι ομαδοποιημένες σύμφωνα με τον σκοπό που δημιουργήθηκε η κλάση. 

```php
class Account
{
  public $name;
  public $email;
  public $balance;
  
  function create($name, $email, $balance)
  {
    $this->name = $name;
    $this->email = $email;
    $this->balance = $balance;
  }

  function deposit($amount)
    #code
  }

  function withdraw($amount)
    #code
  }
}
```

Από το παραπάνω παράδειγμα αν εξαιρέσουμε τις γραμμές 9 & 13 που δεν περιέχουν κώδικα οι μέθοδοί μας, η κλάση μας αρχίζει να παίρνει πιο ολοκληρωμένη μορφή. Ο Bob πλέον, εκτός απο το ανοίγει απλά έναν λογαριασμό, μπορεί να καταθέτει ή να κάνει ανάληψη των χρημάτων από τον τραπεζικό του λογαριασμό όταν το επιθυμεί.

Η κλάση Account, είναι σχεδόν έτοιμη. Το μόνο που απομένει, είναι να ολοκληρώσουμε τις μεθόδους deposit και withdraw. 


## Δημιουργώντας μεθόδους
Ένα σημαντικό προτέρημα όταν δημιουργούμε μεθόδους μέσα σε κλάσεις, είναι οτι τον ίδιο κώδικα μπορούμε να τον επαναχρησιμοποιούμε ταυτόχρονα πολλές φορές δημιουργώντας αντικείμενα. 

Επιπλέον, εφόσον ολοκληρωθεί η κλάση μας, τότε ο προγραμματιστής χρησιμοποιεί την μέθοδο απλώς καλώντας την μέσω του αντικειμένου που δημιουργήθηκε. Συνεπώς, τον προγραμματιστή δεν τον ενδιαφέρει πώς είναι κατασκευασμένη η μέθοδος, αλλά απλώς τί εργασία εκτελεί. Το μόνο που χρειάζεται να γνωρίζει ο προγραμματιστής, είναι οι παράμετροι της μεθόδου του αντικειμένου που έχει δημιουργήσει. Για παράδειγμα, στην κλάση `Account`, η μέθοδος `create` δέχεται τρεις παραμέτρους. Το `$name`, `$email` και  `$balance`.

Καθώς υλοποιούμε ένα αντικείμενο, πρέπει να γνωρίζουμε ακριβώς τί θα κάνει. Για παράδειγμα η μέθοδος `deposit`, θα πρέπει να προσθέτει το ποσό της κατάθεσης στην μεταβλητή `$balance` και να αποθηκεύει το αποτέλεσμα στην `$balance`.

Παρακάτω θα δούμε την υλοποίηση αυτών των δύο μεθόδων.

```php
class Account
{
  public $name;
  public $email;
  public $balance;
  
  function create($name, $email, $balance)
  {
    $this->name = $name;
    $this->email = $email;
    $this->balance = $balance;
  }

  function deposit($amount)
    $balance += $amount;
  }

  function withdraw($amount)
    $balance -= $amount;
  }
}

```

Στο παραπάνω παράδειγμα, για να το χρησιμοποιήσουμε, πρέπει πρώτα να αρχικοποιήσουμε το αντικείμενο με δεδομένα, και στη συνέχεια να χρησιμοποιήσουμε τις μεθόδους `deposit()` και `widthdraw()`.

Βέβαια, για να δούμε τις τιμές που έχει ο κάθε λογαριασμός, χρειαζόμαστε να προσθέσουμε μια ακόμα μέθοδο μέσα στην κλάση `Account` με όνομα `display()`. Η display, θα εμφανίζει τις τιμές των δεδομένων του αντικειμένου μας. Παρακάτω θα την υλοποιήσουμε και θα την χρησιμοποιήσουμε για να δείτε πώς λειτουργεί.

```php
function display()
{
  echo "Name: " . $name;
  echo "Email: " . $email;
  echo "Balance: " . $balance;
}
```

Στο σημείο αυτό, μπορούμε να εκτελέσουμε το παράδειγμα με τον παρακάτω κώδικα.

bob_account = new Account(500, “Bob”, 2310324234)
maria_account = new Account(500, “Maria”, 210456123)
bob_account.withdraw(200)
maria_account.deposit(200)
bob_account.display()
maria_account.display()

Αποτέλεσμα:
Name: Bob
Phone number: 2310324234
Balance: 300

Name: Maria
Phone number: 210456123
Balance: 700

Βέβαια, στην υπάρχουσα υλοποίηση κάθε φορά που χρειάζεται να μεταφέρουμε χρήματα απο έναν λογαριασμό σε έναν άλλον, θα πρέπει να καλούμε δύο μεθόδους, την withdraw και την deposit. Δηλαδή, να αφαιρούμε απο τον έναν και να προσθέτουμε στον άλλον. Αυτό δεν είναι και τόσο λειτουργικό. Για αυτό μπορούμε να σκεφθούμε μια καλύτερη λύση. Τί θα λέγατε αν δημιουργούσαμε μια μόνο μέθοδο που να αφαιρεί χρήματα απο τον έναν λογαριασμό και να τα προσθέτει στον άλλον; Αυτό θα το καταφέρουμε αν δημιουργήσουμε μια μέθοδο με όνομα transfer. 
1. def transfer(amount, target_account)
2.   @balance -= amount
3.   target_account.deposit(amount)
4. end

Βέβαια, αν θελήσουμε να μεταφέρουμε το ποσό που είναι διαθέσιμο στον λογαριασμό απο το αντικείμενο σε μια μεταβλητή, αυτό δεν είναι δυνατό μέχρι στιγμής. Μπορούμε όμως, να δημιουργήσουμε μια ακόμα μέθοδο (την status) μέσα στην κλάση Account η οποία θα επιστρέφει την τιμή της @balance. 

1. def status
2.   return @balance 
3. end

Παρακάτω θα δείτε τον κώδικα της κλάσης Account ολοκληρωμένο. Βέβαια, μπορείτε να προσθέσετε επιπλέον χαρακτηριστικά όσο θα παίζετε. Πειραματιστείτε ελεύθερα!

1. class Account
2.   def initialize(balance, name, phone_number)
3.      @balance = balance
4.      @name = name
5.      @phone_number = phone_number
6.   end
7.   
8.   def deposit(amount)
9.      @balance += amount
10.  end
11.
12.  def withdraw(amount)
13.     @balance -= amount
14.  end
15.
16.  def display()
17.     puts “Name: ” + @name
18.     puts “Phone number” + @phone_number.to_s
19.     puts “Balance: ” + @balance.to_s
20.  end 
21.
22.  def transfer(amount, target_account)
23.     @balance -= amount
24.     target_account.deposit(amount)
25.  end
26. 
27.  def status
28.     return @balance 
29.  end
30. end

